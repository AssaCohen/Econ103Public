\documentclass[12pt]{article}


\title{Proof of the Law of Iterated Expectations}
\author{Francis J.\ DiTraglia}
\date{Econ 103}

\begin{document}

\maketitle

\noindent This is not required for the course: only read it if you're interested. The proof I give below is for discrete RVs. The proof for continuous RVs is similar but uses integrals rather than sums. I've added subscripts to the expectations below to make it clear \emph{which} pmf we're using to take the expectation.
\begin{eqnarray*}
	E_X\left[ E_{Y|X}\left[Y|X\right] \right] &=&E_X\left[ \sum_y y \; p_{Y|X}(y|x)\right]\\
		&=& \sum_x \left( \sum_y y \; p_{Y|X}(y|x)\right) p_X(x) \\
		&=& \sum_x \sum_y y \; p_X(x) \; p_{Y|X}(y|x)\\
		&=& \sum_x \sum_y y \; p_{XY}(x,y)\\
		&=& \sum_y y \sum_x p_{XY}(x,y)\\
		&=& \sum_y y \;p_Y(y)\\
		&=& E[Y]
\end{eqnarray*}
The second step is the tricky one. Here what we're doing is calculating the expected value of the function $g(X) = \sum_y p_{Y|X}(y|X)$ with respect to the \emph{marginal} pmf of $X$. The other steps should be familiar from the derivations we did in class.

\end{document}